---
apiVersion: v1
kind: Service
metadata:
  name: aws9-service-blog
  namespace: aws9c
spec:
  selector:
    color: black  # ì´ labelì„ ê°€ì§„ Podì™€ ì—°ê²°
  ports:
    - protocol: TCP
      port: 80         # ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•  í¬íŠ¸
      targetPort: 80   # ì»¨í…Œì´ë„ˆ ë‚´ë¶€ í¬íŠ¸
  type: LoadBalancer   # ì™¸ë¶€ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•œ LoadBalancer íƒ€ì… ì„œë¹„ìŠ¤
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: aws9-deploy-blog
  namespace: aws9c
spec:
  selector:
    matchLabels:
      color: black  # ì´ ë¼ë²¨ì„ ê°€ì§„ Podë“¤ì„ ëŒ€ìƒìœ¼ë¡œ ê´€ë¦¬
  template:
    spec:
      imagePullSecrets:
        - name: regcred   # ğŸŠ ë°©ê¸ˆ ë§Œë“  secret ì´ë¦„
  template:
    metadata:
      labels:
        color: black  # Podì— ì ìš©ë  ë¼ë²¨ (Serviceì™€ ì—°ê²°ë˜ê¸° ìœ„í•´ ë™ì¼í•´ì•¼ í•¨)
    spec:
      containers:
        - name: aws9c-blog
          image: hub.aws9.pri/aws9/blog:latest  # ì‚¬ìš©ë  ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€
          ports:
            - containerPort: 80     # ì»¨í…Œì´ë„ˆì—ì„œ ì—´ë¦¬ëŠ” í¬íŠ¸
          resources:
            limits:
              memory: "64Mi"        # ìµœëŒ€ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
              cpu: "500m"           # ìµœëŒ€ CPU ì‚¬ìš©ëŸ‰
            requests:
              memory: "32Mi"        # ìµœì†Œ ë³´ì¥ ë©”ëª¨ë¦¬
              cpu: "250m"           # ìµœì†Œ ë³´ì¥ CPU
